[tox]
envlist = py38,,py39,py310
toxworkdir = {toxinidir}/target/.tox
isolated_build = True

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310

[testenv]
allowlist_externals = 
    git
deps = 
    -r requirements-test.txt
passenv = 
    HOME
commands = 
    git config user.name "tox"
    git config user.email "tox@email.com"
    # Lint and format check in tox so the build process can be replicated as much as possible locally
    flake8 .
    black --check --diff .
    pytest {posargs}
